Google Test представляет собой один из наиболее широко используемых фреймворков для написания тестов на C++. В отличие от таких простых инструментов, как `assert`, он даёт множество полезных функций для упрощения тестирования, например возможность писать как модульные, так и интеграционные тесты, и формирует подробные отчёты с результатами.

Давайте вернёмся к примеру с `Rational` и посмотрим, как тестировать этот класс с помощью Google Test. Напомним, что в нём реализованы конструктор с параметрами и перегрузка операции сложения. В прошлом уроке мы написали проверки для них, используя функцию `assert`.

```cpp
#include <cassert> 
#include "rational.h"

int main() {
    // Тест для проверки конструктора.
    Rational r1(3, 4);
    assert(r1.GetNumerator() == 3);
    assert(r1.GetDenominator() == 4);
    
    // Тест для проверки сложения.
    Rational r6 = Rational(1, 5) + Rational(2, 5);
    assert(r6.GetNumerator() == 3);
    assert(r6.GetDenominator() == 5);
} 
```

При использовании Google Test код будет выглядеть следующим образом.

```cpp
#include <gtest/gtest.h> // Подключаем библиотеку.
#include "rational.h"    // Подключаем файл с определением Rational.

// Объявление тестового класса RationalTest.
class RationalTest : public ::testing::Test {};

// Тест для конструктора.
TEST(RationalTest, ConstructorTest) {
    Rational r = Rational(3, 4);
    EXPECT_EQ(r.GetNumerator(), 3);
    EXPECT_EQ(r.GetDenominator(), 4);
}

// Тест для сложения.
TEST(RationalTest, AdditionTest) {
    Rational r = Rational(1, 5) + Rational(2, 5);
    EXPECT_EQ(r.GetNumerator(), 3);
    EXPECT_EQ(r.GetDenominator(), 5);
}

// Главная функция для запуска тестов.
int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

Чтобы использовать фреймворк, необходимо подключить заголовочный файл `<gtest/gtest.h>` (название может отличаться в зависимости от способа установки).

Далее следует объявление класса `RationalTest`, который будет хранить все тесты для `Rational`. Как правило, имя класса отражает часть кода, которую он проверяет. Запись `class RationalTest : public ::testing::Test` означает, что `RationalTest` **наследуется** от библиотечного класса `::testing::Test`, то есть содержит все его методы и свойства в дополнение к собственным. Это позволяет использовать `RationalTest` для выполнения тестов через Google Test.

Затем в коде описываются юнит-тесты. Для создания теста используется макрос `TEST`, который принимает два аргумента: название тестового класса (`RationalTest`) и название теста (`AdditionTest`).

Макрос `EXPECT_EQ` позволяет убедиться, что два значения, переданные в качестве его аргументов, равны. Если это условие выполняется, тест считается пройденным.

Функция `main` инициализирует Google Test с аргументами командной строки (`int argc` и `char **argv`), а команда `RUN_ALL_TESTS()` запускает выполнение всех тестов.

Как и во многих других фреймворках, в Google Test используются макросы — специальные директивы препроцессора, которые позволяют писать тесты в удобной форме. Далее представлен список наиболее распространённых макросов.

- `EXPECT_EQ(actual_value, true_value)`: проверяет равенство двух значений. Если они не равны, тест не проходит.
- `EXPECT_NE(actual_value, true_value)`: проверяет, что два значения не равны.
- `EXPECT_LT(value_1, value_2)`: проверяет, что `value_1` меньше `value_2`.
- `EXPECT_GT(value_1, value_2)`: проверяет, что `value_1` больше `value_2`.
- `EXPECT_TRUE(condition)`: проверяет, что условие истинно.
- `EXPECT_FALSE(condition)`: проверяет, что условие ложно.
    

Префикс `EXPECT_` можно заменить на `ASSERT_`. В первом случае при падении теста программа продолжит выполнение, во втором — завершится с ошибкой.

После завершения тестирования Google Test выводит в консоль отчёт, показывающий, что все тесты успешно пройдены. Если какой-либо тест не проходит, отчёт включает в себя информацию о месте и причине сбоя, что значительно облегчает отладку.

Подробная [документация Google Test](https://google.github.io/googletest/).
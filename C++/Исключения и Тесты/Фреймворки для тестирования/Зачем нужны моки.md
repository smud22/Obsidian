Как правило, настоящие приложения состоят из большого количества независимых компонентов, взаимодействующих друг с другом. Чтобы проверить работу одной части, нужно использовать и другие, что может усложнить тестирование. В таких случаях на помощь приходят **моки** (от англ. mock — «подражание») — специальные объекты, которые заменяют компоненты приложения, имитируя их работу.

![](https://code.s3.yandex.net/CPP/assets/c01_2024/s05_oop/ft1.png)

Моки могут выполнять следующие функции:

- Замена сложных зависимостей простыми объектами. Например, подключение к настоящей базе данных может быть сложным и долгим процессом (или вовсе недоступным в тестовой среде). Вместо него можно использовать мок, который возвращает заранее подготовленную информацию.
- Изоляция от внешних систем. Если приложение использует сетевые запросы, имеет смысл заменить сетевое подключение на моки. Это позволит тестам получать стабильные данные, которые не будут зависеть от состояния сети.
- Контроль данных. Моки позволяют задавать определённые данные, которые должен возвращать элемент системы. Например, если в программе используется генератор случайных чисел, тестировать её может быть сложно. (Представьте, что вы пишете тесты для игры «Камень, ножницы, бумага», в которой фигура компьютера выбирается случайно.) Замена генератора случайных чисел на мок значительно упростит тестирование.
- Контроль вызовов. Моки можно использовать вместо настоящих объектов, чтобы подсчитать, какие методы вызывались и сколько раз.

Вы уже встречали моки, когда разрабатывали приложение «Фотоальбом». Вместо объекта `QTimer` в нём использовался `prac::QTimer`, который внешне работал так же, но при этом позволял протестировать код.
Помимо функций, шаблоны успешно работают и с перегрузками операций. Давайте вспомним код для удобного вывода точки (например, типа `PointInt`).

```cpp
// Выводит координаты точки.
std::ostream& operator << (std::ostream &os, const PointInt &point) {
    return os << "("s << point.x << "; "s << point.y << ")"s;
}; 
```

Теперь можно превратить эту перегрузку в шаблон.

```cpp
template <typename T>
std::ostream& operator << (std::ostream &os, const Point<T> &point) {
    return os << "("s << point.x << "; "s << point.y << ")"s;
}; 
```

Это позволит печатать координаты, имеющие любой тип, для которого определена операция вывода.

Аналогичным образом можно написать функцию вывода для объектов шаблонного класса `Vector2D`. При этом можно задействовать перегрузку для `Point` или — как в примере ниже — обойтись без неё.

```cpp
template<typename T>
class Vector2D { 
public:
    Vector2D(Point<T> p_start, Point<T> p_end) 
        : start_(p_start), end_(p_end) {} 
        
    template<typename D> // Объявление перегрузки как дружественной функции.
    friend std::ostream& operator<<(std::ostream &, const Vector2D<D> &);
        
private:
  Point<T> start_;
  Point<T> end_; 
};

template<typename T> // Определение перегрузки.
std::ostream& operator<<(std::ostream &os, const Vector2D<T> &vec) {
        return os << "[("s << vec.start_.x << ", "s << vec.start_.y 
                  << "), ("s << vec.end_.x << ", "s << vec.end_.y << ")]"s;
}

int main() {
    Vector2D<int> vec{{5, 42}, {627, 616}};
    std::cout << vec << std::endl; // Вывод вектора: [(5, 42), (627, 616)].
} 
```

Чтобы перегруженная операция имела доступ к приватным полям класса, необходимо объявить её как дружественную функцию с помощью ключевого слова `friend`. Обратите внимание, что при этом она не является членом класса и не использует его шаблонный аргумент: это самостоятельный шаблон с собственным аргументом `D`.

Рассмотрим ещё один пример — функцию `ToString`, превращающую переданную переменную в строку. Это может быть полезно для вывода или в работе с текстами. В функции используется класс потока вывода `std::ostringstream`. Сначала мы записываем в него значение переменной, а затем получаем содержимое потока и превращаем в `std::string`. Такой способ сработает для любого типа с определённой операцией вывода.

```cpp
#include <iostream>
#include <sstream>

using namespace std::literals;

template<typename T> // Преобразует в строку.
std::string ToString(const T& x) {
   std::ostringstream s;
   s << x;
   return s.str();
}

// Вывод для pair.
template <typename F, typename S>
std::ostream& operator << (std::ostream &os, const std::pair<F, S> &pair) {
    return os << "("s << pair.first << "; "s << pair.second << ")"s;
}

int main() {
    std::string str_double = "Double value = "s + ToString(3.14);
    std::cout << str_double << std::endl; // Double value = 3.14.

    std::pair p{"pi"s, 3.14};
    std::string str_pair = "Pair value = "s + ToString(p);
    std::cout << str_pair << std::endl; // Pair value = (pi; 3.14).
} 
```

В этом примере `ToString` работает как с типом `double`, так и с `pair`, для которого мы определили операцию `<<`.

С помощью перегрузок можно модернизировать пример со сложением векторов: сделаем так, чтобы вместо функции `Sum` можно было использовать операцию `+`.

```cpp
template <typename T> // Шаблон перегрузки сложения.
Vector2D<T> operator+(Vector2D<T> v1, Vector2D<T> v2) {
    return Vector2D<T> {
        { v1.GetStart() + v2.GetStart() },
        { v1.GetEnd() + v2.GetEnd() }
    };
}

template<typename T>
std::ostream& operator<<(std::ostream &os, const Vector2D<T> &vec) {
        return os << "[("s << vec.start_.x << ", "s << vec.start_.y 
                  << "), ("s << vec.end_.x << ", "s << vec.end_.y << ")]"s;
}

int main() {
    Vector2D<int> vec_1{{0, 0}, {10, 10}};
    Vector2D<int> vec_2{{-2, 2}, {-6, 6}};

    Vector2D<int> vec_sum = vec_1 + vec_2; // Складываем векторы.

    // Координаты начала: (-2, 2).
    std::cout << vec_sum.GetStart().x << ", "s << vec_sum.GetStart().y << std::endl;

    // Координаты конца: (4, 16).
    std::cout << vec_sum.GetEnd().x << ", "s << vec_sum.GetEnd().y << std::endl;
} 
```
Из предыдущих уроков вы узнали, что функциональные объекты используются как:

- Компараторы — для сортировки последовательности в соответствии с заданными условиями.
- Предикаты — чтобы искать элемент по заданным параметрам.

Ещё один вариант использования функциональных объектов — **функции обратного вызова** (англ. callback). Их особенность в том, что они не вызываются прямо в коде, а передаются в другую вызываемую функцию, где она будет вызвана в случае наступления какого-либо ожидаемого события.

В качестве колбэк-функций могут использоваться любые функциональные объекты, но проще всего в этом случае применять лямбда-функции.

Рассмотрим код, который выполняет действие для каждого чётного числа в контейнере:

```cpp
int main() {
    std::vector<int> numbers = {1, 2, 3, 4, 5};
    
    auto even_action = [](int n){
        std::cout << "Обнаружено чётное число: " << n << std::endl;
    };
    
    for(auto num : numbers) {
        if (num % 2 == 0) {
            even_action(num);
        }
    }
} 
```

В коде, который взяли за пример, есть два этапа: проверка условия и выполнение действия. Они простые, поэтому соединены в одной функции.

Попробуем применить к этому коду колбэк-функцию. Для этого оставим в `main` только код действия, а цикл, находящий чётные числа, вынесем из него:

```cpp
// Функция вызывает колбэк для чётных чисел.
template <typename Callback>
void DoIfEven(const std::vector<int>& numbers, Callback callback) {
    for(auto num : numbers) {
        if (num % 2 == 0) {
            callback(num);
        }
    }
}

int main() {
    std::vector<int> numbers = {1, 2, 3, 4, 5};

    // even_action — это колбэк-функция.
    auto even_action = [](int n){
        std::cout << "Обнаружено чётное число: " << n << std::endl;
    };

    // DoIfEven вызовет наш колбэк для всех чётных чисел.
    DoIfEven(numbers, even_action);
}
 
```

Таким образом мы превратили `even_action` в функцию обратного вызова. Она передаётся в `DoIfEven` в качестве аргумента и будет вызвана при наступлении события — обнаружении чётного числа.

Функции, которые могут принять другие функции в качестве аргументов или возвращать их как результат работы, называют **функциями высшего порядка**.

Функции обратного вызова позволяют снизить связи между частями программы и улучшить архитектуру. Благодаря этому код, определяющий момент события, отделяется от кода, реагирующего на это событие. Так вносить изменение в работу программы будет проще.

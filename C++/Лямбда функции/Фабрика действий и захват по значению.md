Используя захват данных, можно менять не только переменные, но и само действие лямбды. При этом применяют **фабрику функторов** — функцию, которая возвращает лямбду:

```cpp
auto CreateSinger(const std::string& voice) {
    auto lambda = [/* захват данных */](){
        std::cout << voice << ", " << voice << ", " << voice 
                  << std::endl;
    };

    return lambda;
} 
```

Посмотрите на эту функцию внимательно. Если вызвать `CreateSinger("Мяу")`, получим функтор. Если сохранить его в переменную и вызвать, то каждый вызов функтора трижды выведет «Мяу»:

```cpp
auto meow_singer = CreateSinger("Мяу");
// При вызове функтора не нужно использовать параметр:
meow_singer();
meow_singer();
meow_singer();

auto bark_singer = CreateSinger("Гав");
bark_singer(); 
```

Также в переменную `bark_singer` записали созданную лямбду с тройным выводом «Гав». Вот что получится:

```
Мяу, Мяу, Мяу
Мяу, Мяу, Мяу
Мяу, Мяу, Мяу
Гав, Гав, Гав 
```

Чтобы код корректно работал, надо подумать, как передать значение внутрь лямбды. Если использовать `&`, то программа потерпит фиаско: в лямбде сохранится ссылка на параметр функции `voice`, но эта строка будет уничтожена сразу после вызова `CreateSinger`, так как переменная является локальной. В таком случае используют **захват по значению** — вместо `&` пишется `=`:

```cpp
auto CreateSinger(const std::string& voice) {
    // Поставили "=" для захвата по
    // значению    ↴
    auto lambda = [=](){
        std::cout << voice << ", " << voice << ", " << voice 
                  << std::endl;
    };
} 
```

При таком захвате значение используемой переменной (`voice`) скопируется внутрь лямбды.Теперь вы разобрались, как создать локальные функции в виде лямбда-выражений, и познакомились с двумя способами захвата информации — по ссылке и по значению. Подведём итог, когда и какой тип захвата использовать.

**По ссылке** (`[&]`):

- когда надо предоставить возможность вносить изменения;
- при использовании лямбды внутри функции для изменения переменных этой функции.

**По значению** (`[=]`):

- время жизни переменной короче, чем время жизни лямбды;
- при создании фабрики функторов — возврате лямбды из функции.

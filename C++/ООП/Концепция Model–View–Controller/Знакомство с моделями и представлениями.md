В области архитектуры программного обеспечения есть такое понятие, как **паттерн программирования**. Можно встретить другое название — **шаблон проектирования**. Паттерн — это схема классов и их взаимодействия, помогающая решить определённую задачу разработки.

Среди часто используемых паттернов можно выделить такие: фабрика, одиночка (англ. singleton), стратегия, декоратор. У каждого из них своя область использования.

В этом уроке вы познакомитесь с одним из часто применяемых паттернов — Model–View–Controller, или MVC, — «Модель-Представление-Контроллер».

В этом паттерне задачи, решаемые проектом, делятся на три части:

1. **Модель.** Определяет поведение программы. Модель хранит все основные данные и предоставляет программные возможности для их корректного изменения. Например, если вы проектируете видеоигру, то модель должна содержать позиции всех персонажей, их показатели здоровья, а также все игровые предметы, локации и прочие объекты.
2. **Представление.** Отображает данные для пользователя. Под Представлением чаще всего понимается интерфейс.
3. **Контроллер.** Это посредник между Представлением и Моделью. Контроллер обрабатывает действия пользователя и меняет Модель в соответствии с тем, что требуется человеку.

Существует два видения модели MVC. В первом из них Контроллер предназначен для реакции на действия пользователя. Он отделён от Представления:

![](https://code.s3.yandex.net/CPP/assets/c01_2024/s04_containers_and_algorithms/image_cc-milz.png)

Мы будем рассматривать другой вариант. В нём контроллер является посредником между Моделью и Представлением:

![](https://code.s3.yandex.net/CPP/assets/c01_2024/s04_containers_and_algorithms/image_1.png)

В Qt используется вторая схема. Как правило, Контроллер очень тесно интегрирован с Представлением. В этом случае говорят о паттерне Model–View вместо Model–View–Controller.

Вы можете лучше понять, как устроен MVC, на примере финального задания предыдущей темы — шаблонного калькулятора. В нём вы чётко отделили Контроллер от Представления (класса `MainWindow`), сделав его отдельным классом.

![](https://code.s3.yandex.net/CPP/assets/c01_2024/s04_containers_and_algorithms/calculator.png)

_Взаимодействие классов в проекте «Калькулятор»_

При этом код `MainWindow` не содержит никакой логики и только принимает команды контроллера, то есть его реализация достаточно проста. Код окна и модели оказался полностью изолированным. Что позволяет подключать к интерфейсу различные модели, и калькулятор работает с разными типами чисел.

При использовании этого паттерна код проекта разбит на части, у каждой из частей своя роль: модели, представления или контроллера.

Разделение выполняемых задач по разным классам позволяет сделать проект более гибким. Вносить правки и разбираться в проекте будет легче, чем если всю функциональность кода разместить в одном классе. Выделим преимущества, которые даёт использование MVC:

- **Разделение обязанностей.** При таком подходе код проекта разбит на логические части. Разные компоненты можно менять независимо. Их легче поддерживать и развивать.
- **Возможность замены компонентов.** Одна и та же модель может работать с разными представлениями. Благодаря этому можно менять внешний вид приложения или поддерживать разные фреймворки. При этом наиболее сложная часть программы, содержащая логику её работы, остаётся неизменной.
- **Возможность разработки в команде.** Поскольку компоненты проекта самостоятельны, их могут развивать несколько разработчиков независимо друг от друга.

Предположим, вы разрабатываете редактор документов (наподобие Microsoft Word). Распределите действия по классам, к которым они принадлежат.

![[Pasted image 20260129091545.png]]